{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{\"9qlI\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"o0o1\"),a=n.n(r),s=n(\"HaE+\"),o=n(\"q1tI\"),c=n.n(o),i=n(\"/MKj\"),l=n(\"9idV\"),u=n(\"DjIZ\"),p=n(\"rePB\"),b=n(\"Gwco\"),f=n.n(b),d=n(\"mlGW\"),m=n.n(d),g=(n(\"Txfo\"),n(\"vDqi\")),O=n.n(g),v=n(\"T/rR\"),j=n(\"QojX\"),w=n(\"ldY6\"),h=n(\"OK22\"),k=n(\"NUse\"),y=c.a.createElement;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=Object(h.a)({WrappedComponent:function(e){var t=e.responseFacebook,n=e.ResponseGithubOnSuccess,r=e.ResponseGithubOnFailure,c=e.SetLogin,l=Object(i.b)(),u=Object(i.c)(w.r),b=Object(i.c)(w.f),d=Object(i.c)(w.k),g=Object(i.c)(w.s),h=Object(i.c)(w.l),N=Object(o.useState)(\"\"),S=N[0],P=N[1];Object(o.useEffect)((function(){P(window.location.href)}),[]);var D=Object(o.useState)({username:\"\",password:\"\"}),I=D[0],E=D[1],C=I.username,L=I.password,q=function(e){return function(t){E(x(x({},I),{},Object(p.a)({},e,t.target.value.trim())))}},G=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,l(Object(k.k)(!0)),e.next=5,O.a.post(\"/api/token-auth/\",{username:C,password:L});case 5:n=e.sent,r=n.data.token,s=n.data.user.profile.email,o=n.data.user.id,c(r,s,C,\"normal\"),l(Object(k.s)(o)),l(Object(k.k)(!1)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),l(Object(k.k)(!1)),l(Object(k.i)(e.t0.message));case 18:case\"end\":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){h&&function(){var e=Object(s.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get(\"api/profile/?reader=\".concat(g));case 3:void 0===(t=e.sent).error&&(n=t.data.bookmarks.split(\",\"),l(Object(k.f)(n.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"bookmarks\",t.data.bookmarks.trim()),r=t.data.finishedArticles.split(\",\"),l(Object(k.j)(r.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"finishedArticles\",t.data.finishedArticles.trim())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[g,h]),y(o.Fragment,null,y(\"div\",{className:\"\".concat(!0===u?\"signinform-move-left signinform\":\"signinform\")},!0===d?y(\"div\",{className:\"signinform-grid-box\"},y(\"div\",{className:\"signinform-spinner\"},y(v.a,{animation:\"border\",role:\"status\"},y(\"span\",{className:\"sr-only\"},\"Loading...\")))):y(\"div\",{className:\"signinform-grid-box\"},y(\"div\",{className:\"title\"},\"Welcome back!\"),y(f.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:t,render:function(e){return y(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),y(m.a,{className:\"github-btn\",clientId:\"Iv1.ca8ab67c0ba860ab\",redirectUri:S,onSuccess:n,onFailure:r,buttonText:\"Github\"}),y(\"div\",{className:\"split-line\"},\"Or signin by username\"),y(\"div\",{className:\"signin-form\"},y(j.a,{onSubmit:G},y(j.a.Group,{controlId:\"formBasicEmail\"},y(j.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:q(\"username\")})),y(j.a.Group,{controlId:\"formBasicPassword\"},y(j.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:q(\"password\")})),y(\"button\",{className:\"btn-submit\"},\"Sign in\"))),y(\"div\",{className:\"messages\"},b))))}}),P=(n(\"v+B1\"),n(\"q4sD\"),n(\"CKl+\")),D=n(\"xrSH\"),I=n(\"QvYV\"),E=n(\"i30r\"),C=n(\"SkY1\"),L=c.a.createElement,q=function(e){var t=e.jsonLdData;return L(I.a,null,L(E.a,{title:\"ALayman Daily Learning - Signin\",keywords:\"signin\",url:\"https://daily-learning.herokuapp.com/\",description:\"Daily learning provides articles, challenges, or videos to people who are also self-learner for programming.\",jsonLd:t}),L(i.a,{store:l.a},L(u.a,null),L(\"div\",{className:\"signin-grid-box\"},L(D.a,null),L(S,null),L(P.a,null))))};q.getInitialProps=function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,O.a.get(\"/api/articles\");case 4:r=e.sent,n=Object(C.a)(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return console.log(JSON.stringify(n)),e.abrupt(\"return\",{jsonLdData:JSON.stringify(n)});case 13:case\"end\":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();t.default=q},qt10:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return n(\"9qlI\")}])}},[[\"qt10\",0,2,3,1,4,6,5]]]);","extractedComments":[]}