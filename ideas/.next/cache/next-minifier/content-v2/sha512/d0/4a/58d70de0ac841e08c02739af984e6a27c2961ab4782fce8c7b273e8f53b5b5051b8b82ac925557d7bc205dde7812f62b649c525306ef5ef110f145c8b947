{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{\"9qlI\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"q1tI\"),r=n.n(a),s=n(\"/MKj\"),o=n(\"8Kt/\"),c=n.n(o),i=n(\"9idV\"),l=n(\"DjIZ\"),u=n(\"o0o1\"),b=n.n(u),m=n(\"HaE+\"),p=n(\"rePB\"),f=n(\"Gwco\"),d=n.n(f),O=n(\"mlGW\"),g=n.n(O),j=(n(\"Txfo\"),n(\"vDqi\")),v=n.n(j),w=n(\"T/rR\"),h=n(\"QojX\"),k=n(\"ldY6\"),y=n(\"OK22\"),N=n(\"NUse\"),x=r.a.createElement;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=Object(y.a)((function(e){var t=e.responseFacebook,n=e.ResponseGithubOnSuccess,r=e.ResponseGithubOnFailure,o=e.SetLogin,c=Object(s.b)(),i=Object(s.c)(k.r),l=Object(s.c)(k.f),u=Object(s.c)(k.k),f=Object(s.c)(k.s),O=Object(s.c)(k.l),j=Object(a.useState)(\"\"),y=j[0],P=j[1];Object(a.useEffect)((function(){P(window.location.href)}),[]);var E=Object(a.useState)({username:\"\",password:\"\"}),I=E[0],C=E[1],D=I.username,q=I.password,G=function(e){return function(t){C(S(S({},I),{},Object(p.a)({},e,t.target.value.trim())))}},L=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c(Object(N.k)(!0)),e.next=5,v.a.post(\"/api/token-auth/\",{username:D,password:q});case 5:n=e.sent,a=n.data.token,r=n.data.user.profile.email,s=n.data.user.id,o(a,r,D,\"normal\"),c(Object(N.s)(s)),c(Object(N.k)(!1)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),c(Object(N.k)(!1)),c(Object(N.i)(e.t0.message));case 18:case\"end\":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){O&&function(){var e=Object(m.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(\"api/profile/?reader=\".concat(f));case 3:void 0===(t=e.sent).error&&(n=t.data.bookmarks.split(\",\"),c(Object(N.f)(n.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"bookmarks\",t.data.bookmarks.trim()),a=t.data.finishedArticles.split(\",\"),c(Object(N.f)(a.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"finishedArticles\",t.data.finishedArticles.trim())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[f,O]),x(a.Fragment,null,x(\"div\",{className:\"\".concat(!0===i?\"signinform-move-left signinform\":\"signinform\")},!0===u?x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"signinform-spinner\"},x(w.a,{animation:\"border\",role:\"status\"},x(\"span\",{className:\"sr-only\"},\"Loading...\")))):x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"title\"},\"Welcome back!\"),x(d.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:t,render:function(e){return x(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),x(g.a,{className:\"github-btn\",clientId:\"51b1a8ee5b7cad1e6a85\",redirectUri:y,onSuccess:n,onFailure:r,buttonText:\"Github\"}),x(\"div\",{className:\"split-line\"},\"Or signin by username\"),x(\"div\",{className:\"signin-form\"},x(h.a,{onSubmit:L},x(h.a.Group,{controlId:\"formBasicEmail\"},x(h.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:G(\"username\")})),x(h.a.Group,{controlId:\"formBasicPassword\"},x(h.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:G(\"password\")})),x(\"button\",{className:\"btn-submit\"},\"Sign in\"))),x(\"div\",{className:\"messages\"},l))))})),I=(n(\"v+B1\"),n(\"q4sD\"),n(\"CKl+\")),C=n(\"xrSH\"),D=r.a.createElement;t.default=function(){return D(\"div\",null,D(c.a,null,D(\"title\",null,\"ALayman Learning Booster - Sign in\"),D(\"link\",{rel:\"icon\",href:\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",type:\"image/x-icon\"})),D(s.a,{store:i.a},D(l.a,null),D(\"div\",{className:\"signin-grid-box\"},D(C.a,null),D(E,null),D(I.a,null))))}},qt10:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return n(\"9qlI\")}])}},[[\"qt10\",0,2,3,1,4,7,5]]]);","extractedComments":[]}