{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{\"9qlI\":function(e,t,n){\"use strict\";n.r(t);var a=n(\"q1tI\"),r=n.n(a),o=n(\"/MKj\"),s=n(\"8Kt/\"),c=n.n(s),i=n(\"9idV\"),l=n(\"DjIZ\"),u=n(\"o0o1\"),b=n.n(u),p=n(\"HaE+\"),m=n(\"rePB\"),f=n(\"Gwco\"),d=n.n(f),g=n(\"mlGW\"),O=n.n(g),j=(n(\"Txfo\"),n(\"vDqi\")),v=n.n(j),w=n(\"T/rR\"),h=n(\"QojX\"),k=n(\"ldY6\"),y=n(\"OK22\"),N=n(\"NUse\"),x=r.a.createElement;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=Object(y.a)((function(e){var t=e.responseFacebook,n=e.ResponseGithubOnSuccess,r=e.ResponseGithubOnFailure,s=e.SetLogin,c=Object(o.b)(),i=Object(o.c)(k.r),l=Object(o.c)(k.f),u=Object(o.c)(k.k),f=Object(o.c)(k.s),g=Object(o.c)(k.l),j=Object(a.useState)({username:\"\",password:\"\"}),y=j[0],P=j[1],E=y.username,I=y.password,C=function(e){return function(t){P(S(S({},y),{},Object(m.a)({},e,t.target.value.trim())))}},D=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(E),console.log(I),e.prev=3,c(Object(N.k)(!0)),e.next=7,v.a.post(\"/api/token-auth/\",{username:E,password:I});case 7:n=e.sent,console.log(n),console.log(n.data.user.profile),a=n.data.token,r=n.data.user.profile.email,o=n.data.user.id,s(a,r,E,\"normal\"),c(Object(N.s)(o)),c(Object(N.k)(!1)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),c(Object(N.k)(!1)),c(Object(N.i)(e.t0.message));case 22:case\"end\":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g&&function(){var e=Object(p.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(\"api/profile/?reader=\".concat(f));case 3:void 0===(t=e.sent).error&&(console.log(t),n=t.data.bookmarks.split(\",\"),console.log(n.filter((function(e){return\"\"!==e}))),c(Object(N.f)(n.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"bookmarks\",t.data.bookmarks.trim()),a=t.data.finishedArticles.split(\",\"),c(Object(N.f)(a.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"finishedArticles\",t.data.finishedArticles.trim())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[f,g]),x(a.Fragment,null,x(\"div\",{className:\"\".concat(!0===i?\"signinform-move-left signinform\":\"signinform\")},!0===u?x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"signinform-spinner\"},x(w.a,{animation:\"border\",role:\"status\"},x(\"span\",{className:\"sr-only\"},\"Loading...\")))):x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"title\"},\"Welcome back!\"),x(d.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:t,render:function(e){return x(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),x(O.a,{className:\"github-btn\",clientId:\"51b1a8ee5b7cad1e6a85\",redirectUri:\"http://localhost:8000/signin\",onSuccess:n,onFailure:r,buttonText:\"Github\"}),x(\"div\",{className:\"split-line\"},\"Or signin by username\"),x(\"div\",{className:\"signin-form\"},x(h.a,{onSubmit:D},x(h.a.Group,{controlId:\"formBasicEmail\"},x(h.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:C(\"username\")})),x(h.a.Group,{controlId:\"formBasicPassword\"},x(h.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:C(\"password\")})),x(\"button\",{className:\"btn-submit\"},\"Sign in\"))),x(\"div\",{className:\"messages\"},l))))})),I=(n(\"v+B1\"),n(\"q4sD\"),n(\"CKl+\")),C=n(\"xrSH\"),D=r.a.createElement;t.default=function(){return D(\"div\",null,D(c.a,null,D(\"title\",null,\"ALayman Learning Booster - Sign in\"),D(\"link\",{rel:\"icon\",href:\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",type:\"image/x-icon\"})),D(o.a,{store:i.a},D(l.a,null),D(\"div\",{className:\"signin-grid-box\"},D(C.a,null),D(E,null),D(I.a,null))))}},qt10:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return n(\"9qlI\")}])}},[[\"qt10\",0,2,3,1,4,7,5]]]);","extractedComments":[]}