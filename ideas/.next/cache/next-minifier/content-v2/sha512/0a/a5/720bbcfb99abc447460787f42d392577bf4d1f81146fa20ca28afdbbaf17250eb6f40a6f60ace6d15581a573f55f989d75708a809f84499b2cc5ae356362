{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Nwme:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signup\",function(){return a(\"smJ5\")}])},smJ5:function(e,t,a){\"use strict\";a.r(t);var n=a(\"q1tI\"),r=a.n(n),s=a(\"/MKj\"),o=a(\"8Kt/\"),c=a.n(o),i=a(\"9idV\"),l=a(\"DjIZ\"),u=a(\"o0o1\"),m=a.n(u),b=a(\"HaE+\"),p=a(\"rePB\"),d=a(\"Gwco\"),f=a.n(d),O=a(\"mlGW\"),g=a.n(O),j=(a(\"Txfo\"),a(\"vDqi\")),v=a.n(j),w=a(\"T/rR\"),h=a(\"QojX\"),k=a(\"nOHt\"),y=a.n(k),N=a(\"ldY6\"),x=a(\"NUse\"),P=a(\"OK22\"),S=r.a.createElement;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=Object(P.a)((function(e){var t=e.responseFacebook,a=e.ResponseGithubOnSuccess,r=e.ResponseGithubOnFailure,o=e.SetLogin,c=Object(s.b)(),i=Object(s.c)(N.l),l=Object(s.c)(N.r),u=Object(s.c)(N.f),d=Object(s.c)(N.k);Object(n.useEffect)((function(){i&&y.a.push(\"/\")}),[i]);var O=Object(n.useState)({username:\"\",email:\"\",password:\"\"}),j=O[0],k=O[1],P=j.username,E=j.email,G=j.password,I=function(e){return function(t){k(C(C({},j),{},Object(p.a)({},e,t.target.value.trim())))}},D=function(){var e=Object(b.a)(m.a.mark((function e(t){var a,n,r,s,i,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,c(Object(x.k)(!0)),e.next=5,v.a.post(\"/api/users/\",{username:P,password:G});case 5:if(void 0===(a=e.sent).data.error){e.next=11;break}n=a.data.error,c(Object(x.i)(\"\".concat(Object.keys(n)[0],\" : \").concat(Object.values(n)[0]))),e.next=26;break;case 11:return r=a.data.id,s=a.data.token,{Authorization:\"JWT \".concat(s)},e.next=16,v.a.post(\"/api/profile/\",{email:E,reader:r});case 16:if(i=e.sent,void 0!==(n=i.data.error)&&c(Object(x.i)(\"\".concat(Object.keys(n)[0],\" : \").concat(Object.values(n)[0]))),void 0===i||i.data.email!==E){e.next=26;break}return e.next=22,v.a.post(\"/api/token-auth/\",{username:P,password:G});case 22:e.sent,o(s,E,P,\"normal\"),c(Object(x.s)(r)),void 0===i.error&&(l=i.data.bookmarks.split(\",\"),c(Object(x.f)(l.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"bookmarks\",i.data.bookmarks.trim()),u=i.data.finishedArticles.split(\",\"),c(Object(x.f)(u.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"finishedArticles\",i.data.finishedArticles.trim()));case 26:c(Object(x.k)(!1)),e.next=34;break;case 29:e.prev=29,e.t0=e.catch(1),c(Object(x.k)(!1)),c(Object(x.i)(e.t0.message)),console.log(e.t0);case 34:case\"end\":return e.stop()}}),e,null,[[1,29]])})));return function(t){return e.apply(this,arguments)}}();return S(n.Fragment,null,S(\"div\",{className:\"\".concat(!0===l?\"signinform-move-left signinform\":\"signinform\")},!0===d?S(\"div\",{className:\"signinform-grid-box\"},S(\"div\",{className:\"signinform-spinner\"},S(w.a,{animation:\"border\",role:\"status\"},S(\"span\",{className:\"sr-only\"},\"Loading...\")))):S(\"div\",{className:\"signinform-grid-box\"},S(\"div\",{className:\"title\"},\"Create Your Free Account\"),S(f.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:t,render:function(e){return S(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),S(g.a,{className:\"github-btn\",clientId:\"51b1a8ee5b7cad1e6a85\",redirectUri:\"http://localhost:3000/signin\",onSuccess:a,onFailure:r,buttonText:\"Github\"}),S(\"div\",{className:\"split-line\"},\"Or signup by email\"),S(\"div\",{className:\"signin-form\"},S(h.a,{onSubmit:D},S(h.a.Group,{controlId:\"formBasicEmail\"},S(h.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:I(\"username\")})),S(h.a.Group,{controlId:\"formBasicPassword\"},S(h.a.Control,{type:\"text\",placeholder:\"Enter Email\",className:\"email\",onChange:I(\"email\")})),S(h.a.Group,{controlId:\"formBasicPassword\"},S(h.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:I(\"password\")})),S(\"button\",{className:\"btn-submit\"},\"Get Started\"))),S(\"div\",{className:\"messages\"},u))))})),I=(a(\"Stkp\"),a(\"q4sD\"),a(\"CKl+\")),D=a(\"xrSH\"),A=(a(\"v+B1\"),r.a.createElement);t.default=function(){return A(\"div\",null,A(c.a,null,A(\"title\",null,\"ALayman Learning Booster - Sign up\"),A(\"link\",{rel:\"icon\",href:\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",type:\"image/x-icon\"})),A(s.a,{store:i.a},A(l.a,null),A(\"div\",{className:\"signin-grid-box\"},A(D.a,null),A(G,null),A(I.a,null))))}}},[[\"Nwme\",0,2,3,1,4,7,5]]]);","extractedComments":[]}