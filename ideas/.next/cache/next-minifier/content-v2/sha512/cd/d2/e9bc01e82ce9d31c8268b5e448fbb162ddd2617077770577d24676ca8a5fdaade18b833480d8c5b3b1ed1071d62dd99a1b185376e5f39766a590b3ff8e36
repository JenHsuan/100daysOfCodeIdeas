{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Nwme:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signup\",function(){return n(\"smJ5\")}])},p46w:function(e,t,n){var a,r;!function(o){if(void 0===(r=\"function\"===typeof(a=o)?a.call(t,n,t,e):a)||(e.exports=r),!0,e.exports=o(),!!0){var s=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=s,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(a){function r(){}function o(t,n,o){if(\"undefined\"!==typeof document){\"number\"===typeof(o=e({path:\"/\"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():\"\";try{var s=JSON.stringify(n);/^[\\{\\[]/.test(s)&&(n=s)}catch(u){}n=a.write?a.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\\(\\)]/g,escape);var c=\"\";for(var i in o)o[i]&&(c+=\"; \"+i,!0!==o[i]&&(c+=\"=\"+o[i].split(\";\")[0]));return document.cookie=t+\"=\"+n+c}}function s(e,n){if(\"undefined\"!==typeof document){for(var r={},o=document.cookie?document.cookie.split(\"; \"):[],s=0;s<o.length;s++){var c=o[s].split(\"=\"),i=c.slice(1).join(\"=\");n||'\"'!==i.charAt(0)||(i=i.slice(1,-1));try{var u=t(c[0]);if(i=(a.read||a)(i,u)||t(i),n)try{i=JSON.parse(i)}catch(l){}if(r[u]=i,e===u)break}catch(l){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,n){o(t,\"\",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))}))},smJ5:function(e,t,n){\"use strict\";n.r(t);var a=n(\"q1tI\"),r=n.n(a),o=n(\"/MKj\"),s=n(\"8Kt/\"),c=n.n(s),i=n(\"9idV\"),u=n(\"Z4UW\"),l=n(\"o0o1\"),p=n.n(l),f=n(\"HaE+\"),d=n(\"rePB\"),m=n(\"Gwco\"),b=n.n(m),g=n(\"mlGW\"),v=n.n(g),w=(n(\"Txfo\"),n(\"vDqi\")),h=n.n(w),O=n(\"QojX\"),j=n(\"nOHt\"),k=n.n(j),x=n(\"ldY6\"),y=n(\"NUse\"),C=n(\"p46w\"),N=n.n(C),S=r.a.createElement;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(){var e=Object(o.b)(),t=Object(o.c)(x.e);Object(a.useEffect)((function(){t&&k.a.push(\"/\")}),[t]);var n=Object(a.useState)({username:\"\",email:\"\",password:\"\",messages:\"\"}),r=n[0],s=n[1],c=r.username,i=r.email,u=r.password,l=r.messages,m=function(e){return function(t){s(I(I({},r),{},Object(d.a)({},e,t.target.value.trim())))}},g=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post(\"/api/social-auth\",{provider:t,access_token:n});case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var t=Object(f.a)(p.a.mark((function t(n){var a,o,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(\"facebook\",n.accessToken);case 3:a=t.sent,console.log(a),o=a.data.token,c=a.data.username,i=n.email,j(o,i,c),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),s(I(I({},r),{},Object(d.a)({},\"messages\",t.t0.message))),console.log(t.t0),e(Object(y.j)());case 16:case\"end\":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),j=function(t,n,a){null!==t&&void 0!==t&&t.length>0&&(e(Object(y.i)()),e(Object(y.f)(t)),localStorage.setItem(\"login\",\"true\"),null!==n&&void 0!==n&&n.length>0&&(e(Object(y.h)(n)),localStorage.setItem(\"email\",n)),null!==a&&void 0!==a&&a.length>0&&(e(Object(y.o)(a)),localStorage.setItem(\"username\",a)))},C=function(){var t=Object(f.a)(p.a.mark((function t(n){var a,o,c,i,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post(\"/api/get-github-access-token\",{code:n.code});case 3:return a=t.sent,console.log(a.data),t.next=7,g(\"github\",a.data);case 7:o=t.sent,console.log(o),c=o.data.token,i=o.data.email,u=o.data.username,j(c,i,u),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0),s(I(I({},r),{},Object(d.a)({},\"messages\",t.t0.message))),e(Object(y.j)());case 20:case\"end\":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,o,l,f,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,h.a.post(\"/api/users/\",{username:c,password:u});case 4:if(void 0===(n=e.sent).data.error){e.next=10;break}a=n.data.error,s(I(I({},r),{},Object(d.a)({},\"messages\",\"\".concat(Object.keys(a)[0],\" : \").concat(Object.values(a)[0])))),e.next=25;break;case 10:return o=n.data.id,l=n.data.token,f={Authorization:\"JWT \".concat(l)},console.log(N.a.get(\"csrftoken\")),e.next=16,h.a.post(\"/api/profile/\",{email:i,reader:o},{headers:f});case 16:if(m=e.sent,console.log(m),void 0!==(a=m.data.error)&&s(I(I({},r),{},Object(d.a)({},\"messages\",\"\".concat(Object.keys(a)[0],\" : \").concat(Object.values(a)[0])))),void 0===m||m.data.email!==i){e.next=25;break}return e.next=23,h.a.post(\"/api/token-auth/\",{username:c,password:u});case 23:e.sent,j(l,i,c);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(1),s(I(I({},r),{},Object(d.a)({},\"messages\",e.t0.message))),console.log(e.t0);case 31:case\"end\":return e.stop()}}),e,null,[[1,27]])})));return function(t){return e.apply(this,arguments)}}();return S(a.Fragment,null,S(\"div\",{className:\"signinform\"},S(\"div\",{className:\"grid-box\"},S(\"div\",{className:\"title\"},\"Create Your Free Account\"),S(b.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:w,render:function(e){return S(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),S(v.a,{className:\"github-btn\",clientId:\"51b1a8ee5b7cad1e6a85\",redirectUri:\"http://localhost:3000/signin\",onSuccess:C,onFailure:function(e){return console.error(e)},buttonText:\"Github\"}),S(\"div\",{className:\"split-line\"},\"Or signup by email\"),S(\"div\",{className:\"signin-form\"},S(O.a,{onSubmit:E},S(O.a.Group,{controlId:\"formBasicEmail\"},S(O.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:m(\"username\")})),S(O.a.Group,{controlId:\"formBasicPassword\"},S(O.a.Control,{type:\"text\",placeholder:\"Enter Email\",className:\"email\",onChange:m(\"email\")})),S(O.a.Group,{controlId:\"formBasicPassword\"},S(O.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:m(\"password\")})),S(\"button\",{className:\"btn-submit\"},\"Get Started\"))))),S(\"div\",{className:\"messages\"},l))},D=(n(\"Stkp\"),n(\"q4sD\"),n(\"b2pr\")),U=r.a.createElement;t.default=function(){return U(\"div\",null,U(c.a,null,U(\"title\",null,\"ALayman Learning Booster - Sign up\"),U(\"link\",{rel:\"icon\",href:\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",type:\"image/x-icon\"})),U(o.a,{store:i.a},U(u.a,null),U(\"div\",{className:\"grid-box\"},U(P,null),U(\"div\",{className:\"signin-footer\"},U(D.a,null)))))}}},[[\"Nwme\",0,2,4,1,3,6,5]]]);","extractedComments":[]}