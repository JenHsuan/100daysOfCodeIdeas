{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{\"9qlI\":function(e,n,t){\"use strict\";t.r(n);var a=t(\"q1tI\"),r=t.n(a),o=t(\"/MKj\"),s=t(\"8Kt/\"),c=t.n(s),i=t(\"9idV\"),l=t(\"DjIZ\"),u=t(\"o0o1\"),b=t.n(u),m=t(\"HaE+\"),p=t(\"rePB\"),f=t(\"Gwco\"),d=t.n(f),g=t(\"mlGW\"),O=t.n(g),w=(t(\"Txfo\"),t(\"vDqi\")),j=t.n(w),v=t(\"T/rR\"),h=t(\"QojX\"),k=t(\"ldY6\"),y=t(\"OK22\"),N=t(\"NUse\"),x=r.a.createElement;function P(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?P(Object(t),!0).forEach((function(n){Object(p.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=Object(y.a)((function(e){var n=e.responseFacebook,t=e.ResponseGithubOnSuccess,r=e.ResponseGithubOnFailure,s=e.SetLogin,c=Object(o.b)(),i=Object(o.c)(k.r),l=Object(o.c)(k.f),u=Object(o.c)(k.k),f=Object(o.c)(k.s),g=Object(o.c)(k.l),w=Object(a.useState)({username:\"\",password:\"\"}),y=w[0],P=w[1],E=y.username,I=y.password,C=function(e){return function(n){P(S(S({},y),{},Object(p.a)({},e,n.target.value.trim())))}},D=function(){var e=Object(m.a)(b.a.mark((function e(n){var t,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(E),console.log(I),e.prev=3,c(Object(N.k)(!0)),e.next=7,j.a.post(\"/api/token-auth/\",{username:E,password:I});case 7:t=e.sent,console.log(t),console.log(t.data.user.profile),a=t.data.token,r=t.data.user.profile.email,o=t.data.user.id,s(a,r,E,\"normal\"),c(Object(N.s)(o)),c(Object(N.k)(!1)),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),c(Object(N.k)(!1)),c(Object(N.i)(e.t0.message));case 22:case\"end\":return e.stop()}}),e,null,[[3,18]])})));return function(n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){console.log(window.location.hostname),g&&function(){var e=Object(m.a)(b.a.mark((function e(){var n,t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get(\"api/profile/?reader=\".concat(f));case 3:void 0===(n=e.sent).error&&(console.log(n),t=n.data.bookmarks.split(\",\"),console.log(t.filter((function(e){return\"\"!==e}))),c(Object(N.f)(t.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"bookmarks\",n.data.bookmarks.trim()),a=n.data.finishedArticles.split(\",\"),c(Object(N.f)(a.filter((function(e){return\"\"!==e})))),localStorage.setItem(\"finishedArticles\",n.data.finishedArticles.trim())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()()}),[f,g]),x(a.Fragment,null,x(\"div\",{className:\"\".concat(!0===i?\"signinform-move-left signinform\":\"signinform\")},!0===u?x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"signinform-spinner\"},x(v.a,{animation:\"border\",role:\"status\"},x(\"span\",{className:\"sr-only\"},\"Loading...\")))):x(\"div\",{className:\"signinform-grid-box\"},x(\"div\",{className:\"title\"},\"Welcome back!\"),x(d.a,{cssClass:\"fb-btn\",appId:\"240314257268798\",autoLoad:!1,fields:\"name,email,picture\",callback:n,render:function(e){return x(\"button\",{onClick:e.onClick,className:\"fb-btn\"},\"Facebook\")}}),x(O.a,{className:\"github-btn\",clientId:\"51b1a8ee5b7cad1e6a85\",redirectUri:window.location.href,onSuccess:t,onFailure:r,buttonText:\"Github\"}),x(\"div\",{className:\"split-line\"},\"Or signin by username\"),x(\"div\",{className:\"signin-form\"},x(h.a,{onSubmit:D},x(h.a.Group,{controlId:\"formBasicEmail\"},x(h.a.Control,{type:\"text\",placeholder:\"Enter Username\",className:\"username\",onChange:C(\"username\")})),x(h.a.Group,{controlId:\"formBasicPassword\"},x(h.a.Control,{type:\"password\",placeholder:\"Password\",className:\"password\",onChange:C(\"password\")})),x(\"button\",{className:\"btn-submit\"},\"Sign in\"))),x(\"div\",{className:\"messages\"},l))))})),I=(t(\"v+B1\"),t(\"q4sD\"),t(\"CKl+\")),C=t(\"xrSH\"),D=r.a.createElement;n.default=function(){return D(\"div\",null,D(c.a,null,D(\"title\",null,\"ALayman Learning Booster - Sign in\"),D(\"link\",{rel:\"icon\",href:\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",type:\"image/x-icon\"})),D(o.a,{store:i.a},D(l.a,null),D(\"div\",{className:\"signin-grid-box\"},D(C.a,null),D(E,null),D(I.a,null))))}},qt10:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/signin\",function(){return t(\"9qlI\")}])}},[[\"qt10\",0,2,3,1,4,7,5]]]);","extractedComments":[]}