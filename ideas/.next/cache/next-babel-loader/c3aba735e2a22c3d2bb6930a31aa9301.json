{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Card } from 'react-bootstrap';\nimport ArticleModal from '../components/ArticleModal';\nimport '.././css/article.css';\nimport '.././css/card.css';\nimport { selectLoginState } from './states/states';\n\nvar Article = function Article(_ref) {\n  var article = _ref.article;\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var _useState2 = useState(false),\n      isBookmarked = _useState2[0],\n      setBookmark = _useState2[1];\n\n  var isLogin = useSelector(selectLoginState);\n  useEffect(function () {\n    var bookmarksJson = localStorage.getItem(\"bookmarks\");\n\n    if (bookmarksJson !== null) {\n      var bookmarks = JSON.parse(bookmarksJson);\n\n      if (bookmarks.find(function (bookmark) {\n        return bookmark === article.id;\n      }) !== undefined) {\n        setBookmark(true);\n      }\n    }\n  }, []);\n\n  var handleClose = function handleClose() {\n    setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    setShow(true);\n  };\n\n  var onBookmarkClick = function onBookmarkClick() {\n    console.log('onBookmarkClick');\n\n    if (isBookmarked) {\n      var bookmarksJson = localStorage.getItem(\"bookmarks\");\n\n      if (bookmarksJson !== null) {\n        var bookmarks = JSON.parse(bookmarksJson);\n        var newBookmarks = bookmarks.filter(function (bookmark) {\n          return bookmark !== article.id;\n        });\n        localStorage.setItem(\"bookmarks\", JSON.stringify(newBookmarks));\n      }\n\n      setBookmark(false);\n    } else {\n      var bookmarksJson = localStorage.getItem(\"bookmarks\");\n      console.log(bookmarksJson);\n\n      if (bookmarksJson === null) {\n        localStorage.setItem(\"bookmarks\", \"[\".concat(article.id, \"]\"));\n      } else {\n        var bookmarks = JSON.parse(bookmarksJson);\n        bookmarks.push(article.id);\n        localStorage.setItem(\"bookmarks\", JSON.stringify(bookmarks));\n      }\n\n      setBookmark(true);\n    }\n  };\n\n  useEffect(function () {}, []);\n  return __jsx(\"div\", {\n    className: \"articles-row\"\n  }, __jsx(Card, {\n    className: \"article-card\",\n    border: \"light\"\n  }, isLogin && __jsx(\"div\", {\n    className: \"article-bookmark\"\n  }, __jsx(\"span\", {\n    className: \"btn-o\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    onClick: function onClick() {\n      onBookmarkClick();\n      return false;\n    }\n  }, isBookmarked ? __jsx(\"img\", {\n    src: \"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-yellow.png\",\n    alt: \"Add this article to the bookmark\",\n    title: \"Add this article to the bookmark\"\n  }) : __jsx(\"img\", {\n    src: \"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-white.png\",\n    alt: \"Add this article to the bookmark\",\n    title: \"Add this article to the bookmark\"\n  })))), __jsx(Card.Body, {\n    className: \"article-card-body\"\n  }, __jsx(\"img\", {\n    className: \"article-card-img\",\n    src: \"\".concat(article.image),\n    alt: article.title,\n    title: article.title\n  }), __jsx(\"div\", {\n    className: \"title\"\n  }, article.title), __jsx(\"div\", {\n    className: \"date\"\n  }, article.name), __jsx(\"div\", {\n    className: \"date\"\n  }, __jsx(\"span\", {\n    className: \"date\"\n  }, article.time), __jsx(\"span\", null, \" . \"), __jsx(\"span\", {\n    className: \"readtime\"\n  }, article.readtime)), __jsx(\"button\", {\n    className: \"article-btn\",\n    onClick: handleShow\n  }, \"Add to plan\"))), __jsx(ArticleModal, {\n    show: show,\n    handleClose: handleClose,\n    article: article\n  }));\n};\n\nexport default Article;","map":null,"metadata":{},"sourceType":"module"}