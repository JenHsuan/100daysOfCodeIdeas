{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, Fragment } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap';\nimport '../css/navbar.css';\nimport { selectShowPlannerState, selectLoginState, selectUsernameState } from './states/states';\nimport { setPlanner, setLogout, setUsername, setAccessToken, setEmail, setLogin, setFinishedArticles, setBookmarks, setProvider, setUserId } from './actions/articlesAction';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n\nconst NavBar = () => {\n  const router = useRouter();\n  const disPatch = useDispatch();\n  const showPlannerFlag = useSelector(selectShowPlannerState);\n  const isLogin = useSelector(selectLoginState);\n  const username = useSelector(selectUsernameState);\n\n  const showPlanner = () => {\n    if (showPlannerFlag === true) {\n      console.log('Hide Planner');\n      disPatch(setPlanner(false));\n    } else {\n      console.log('Show Planner');\n      disPatch(setPlanner(true));\n    }\n  };\n\n  const SetLogoutForLocalSorage = () => {\n    localStorage.removeItem('bookmarks');\n    localStorage.removeItem('login');\n    localStorage.removeItem('username');\n    localStorage.removeItem('email');\n    localStorage.removeItem('finishedArticles');\n    localStorage.removeItem('token');\n    localStorage.removeItem('provider');\n  };\n\n  const SetLogout = () => {\n    disPatch(setLogout());\n    disPatch(setUsername(''));\n    disPatch(setUserId(-1));\n    disPatch(setEmail(''));\n    disPatch(setFinishedArticles([]));\n    disPatch(setAccessToken(''));\n    disPatch(setProvider(''));\n    disPatch(setBookmarks([]));\n  };\n\n  const SetLogin = (email, username) => {\n    if (email !== null && email !== undefined && email.length > 0) {\n      disPatch(setEmail(email)); //local storage\n\n      localStorage.setItem(\"email\", email);\n    }\n\n    if (username !== null && username !== undefined && username.length > 0) {\n      disPatch(setUsername(username)); //local storage\n\n      localStorage.setItem(\"username\", username);\n    }\n\n    disPatch(setLogin()); //local storage\n\n    localStorage.setItem(\"login\", \"true\");\n  };\n\n  useEffect(() => {\n    const login = localStorage.getItem(\"login\");\n\n    if (login !== null && login === 'true') {\n      const email = localStorage.getItem(\"email\");\n      const username = localStorage.getItem(\"username\");\n      SetLogin(email, username);\n    }\n  }, []);\n  useEffect(() => {\n    if (isLogin === false) {\n      disPatch(setUsername(''));\n    } else {\n      const username = localStorage.getItem(\"username\");\n      disPatch(setUsername(username));\n    }\n  }, [isLogin]);\n\n  const handleLogout = () => {\n    SetLogout();\n    SetLogoutForLocalSorage();\n\n    if (router.pathname !== 'signin') {\n      Router.push(`/signin`);\n    }\n  };\n\n  return __jsx(Navbar, {\n    bg: \"dark\",\n    expand: \"lg\",\n    variant: \"dark\",\n    fixed: \"top\"\n  }, __jsx(Navbar.Brand, {\n    href: \"/\"\n  }, __jsx(\"img\", {\n    src: \"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\",\n    width: \"30\",\n    height: \"30\",\n    className: \"d-inline-block align-top navbar-logo-img\",\n    alt: \"Learning Booster\",\n    title: \"Learning Booster from Sean Hsieh\"\n  }), \"Daily Learning\"), __jsx(Navbar.Toggle, {\n    \"aria-controls\": \"basic-navbar-nav\"\n  }), __jsx(Navbar.Collapse, {\n    id: \"basic-navbar-nav\"\n  }, __jsx(Nav, {\n    className: \"mr-auto\"\n  }, __jsx(Nav.Link, {\n    href: \"about\"\n  }, __jsx(Link, {\n    href: \"/about\"\n  }, __jsx(\"a\", {\n    href: \"/about\"\n  }, \"About\"))), isLogin && __jsx(Fragment, null, __jsx(Nav.Link, {\n    href: \"bookmarks\"\n  }, __jsx(Link, {\n    href: \"/bookmarks\"\n  }, __jsx(\"a\", {\n    href: \"/bookmarks\"\n  }, \"Plans\"))), __jsx(Nav.Link, {\n    href: \"achievements\"\n  }, __jsx(Link, {\n    href: \"/achievements\"\n  }, __jsx(\"a\", {\n    href: \"/achievements\"\n  }, \"Achievements\"))))), __jsx(Nav, null, __jsx(Nav.Link, {\n    href: \"feed\"\n  }, __jsx(\"a\", {\n    href: \"/feed/\"\n  }, \"RSS\"))), __jsx(Nav, null, !isLogin && __jsx(NavDropdown, {\n    title: \"Account\",\n    id: \"basic-nav-dropdown\"\n  }, __jsx(NavDropdown.Item, {\n    href: \"/signin\"\n  }, \"Sign in\"), __jsx(NavDropdown.Item, {\n    href: \"/signup\"\n  }, \"Sign up\")), isLogin && __jsx(NavDropdown, {\n    title: username,\n    id: \"basic-nav-dropdown\"\n  }, __jsx(NavDropdown.Item, {\n    onSelect: handleLogout\n  }, \"Sign out\")))));\n};\n\nexport default NavBar;","map":{"version":3,"sources":["/Users/seanhsieh/github/100daysOfCodeIdeas/ideas/src/components/NavBar.tsx"],"names":["React","useEffect","Fragment","useDispatch","useSelector","Navbar","Nav","NavDropdown","selectShowPlannerState","selectLoginState","selectUsernameState","setPlanner","setLogout","setUsername","setAccessToken","setEmail","setLogin","setFinishedArticles","setBookmarks","setProvider","setUserId","Link","Router","useRouter","NavBar","router","disPatch","showPlannerFlag","isLogin","username","showPlanner","console","log","SetLogoutForLocalSorage","localStorage","removeItem","SetLogout","SetLogin","email","undefined","length","setItem","login","getItem","handleLogout","pathname","push"],"mappings":"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","sourcesContent":["import React, {useEffect, Fragment} from 'react'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Navbar, Nav, NavDropdown} from 'react-bootstrap';\nimport '../css/navbar.css'\nimport {\n    selectShowPlannerState,\n    selectLoginState,\n    selectUsernameState\n} from './states/states';\n\nimport { \n    setPlanner,\n    setLogout,\n    setUsername,\n    setAccessToken,\n    setEmail,\n    setLogin,\n    setFinishedArticles,\n    setBookmarks,\n    setProvider,\n    setUserId\n} from './actions/articlesAction';\nimport Link from 'next/link'\n\nimport Router, { useRouter } from 'next/router'\n\n\nconst NavBar = () => {\n    const router = useRouter();\n    const disPatch = useDispatch();\n    const showPlannerFlag = useSelector(selectShowPlannerState);\n    const isLogin = useSelector(selectLoginState);\n    const username = useSelector(selectUsernameState);\n\n    const showPlanner = () => {\n        if (showPlannerFlag === true) {\n            console.log('Hide Planner')\n            disPatch(setPlanner(false));\n        } else {\n            console.log('Show Planner')\n            disPatch(setPlanner(true));\n        }\n    }\n\n    const SetLogoutForLocalSorage = () => {\n        localStorage.removeItem('bookmarks');\n        localStorage.removeItem('login');\n        localStorage.removeItem('username');\n        localStorage.removeItem('email');\n        localStorage.removeItem('finishedArticles');\n        localStorage.removeItem('token');\n        localStorage.removeItem('provider');\n    }\n\n    const SetLogout = () => {\n        disPatch(setLogout());\n        disPatch(setUsername(''));\n        disPatch(setUserId(-1));\n        disPatch(setEmail(''));\n        disPatch(setFinishedArticles([]));\n        disPatch(setAccessToken(''));\n        disPatch(setProvider(''));\n        disPatch(setBookmarks([]));\n    }\n\n    const SetLogin = (email, username) => {\n        if (email !== null && email !== undefined && email.length >0 ) {\n            disPatch(setEmail(email));\n            //local storage\n            localStorage.setItem(\"email\", email);\n        }\n        if (username !== null && username !== undefined && username.length >0 ) {\n            disPatch(setUsername(username));\n            //local storage\n            localStorage.setItem(\"username\", username);\n        }\n        \n        disPatch(setLogin());\n        //local storage\n        localStorage.setItem(\"login\", \"true\");\n    }\n\n    useEffect(()=> {\n        const login = localStorage.getItem(\"login\");\n        if (login !== null && login === 'true') {\n            const email = localStorage.getItem(\"email\");\n            const username = localStorage.getItem(\"username\");\n            SetLogin(email, username);\n        }\n    }, [])\n\n    useEffect(()=> {\n        if (isLogin === false) {\n            disPatch(setUsername(''));\n        } else {\n            const username = localStorage.getItem(\"username\");\n            disPatch(setUsername(username));\n        }\n    }, [isLogin])\n\n    const handleLogout = () => {\n        SetLogout();\n        SetLogoutForLocalSorage();\n        if (router.pathname !== 'signin') {\n            Router.push(`/signin`)\n        }\n    }\n\n    return (\n    <Navbar bg=\"dark\" expand=\"lg\" variant=\"dark\" fixed=\"top\">\n    <Navbar.Brand href=\"/\">\n        <img\n        src=\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/alaymanicon.png\"\n        width=\"30\"\n        height=\"30\"\n        className=\"d-inline-block align-top navbar-logo-img\"\n        alt=\"Learning Booster\"\n        title=\"Learning Booster from Sean Hsieh\"/>\n      Daily Learning</Navbar.Brand>\n    <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n    <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"mr-auto\">\n            <Nav.Link href=\"about\"> \n                <Link href=\"/about\">\n                    <a href=\"/about\">About</a>\n                </Link>\n            </Nav.Link>\n            {isLogin && (\n                <Fragment>\n                    <Nav.Link href=\"bookmarks\"> \n                        <Link href=\"/bookmarks\">\n                            <a href=\"/bookmarks\">Plans</a>\n                        </Link>\n                    </Nav.Link>\n                    <Nav.Link href=\"achievements\"> \n                        <Link href=\"/achievements\">\n                            <a href=\"/achievements\">Achievements</a>\n                        </Link>\n                    </Nav.Link>\n                </Fragment>\n            )}\n        </Nav>\n        <Nav>\n                <Nav.Link href=\"feed\"> \n                    <a href=\"/feed/\">RSS</a>\n                </Nav.Link>\n        </Nav>\n        <Nav>\n        {!isLogin && (\n            <NavDropdown title='Account' id=\"basic-nav-dropdown\">\n                <NavDropdown.Item href=\"/signin\">\n                    Sign in\n                </NavDropdown.Item>\n                <NavDropdown.Item href=\"/signup\">\n                    Sign up\n                </NavDropdown.Item>\n            </NavDropdown>\n        )}\n        {isLogin && (\n            <NavDropdown title={username} id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onSelect={handleLogout}>\n                    Sign out\n                </NavDropdown.Item>\n            </NavDropdown>\n        )}\n        </Nav>\n    </Navbar.Collapse>\n  </Navbar>\n    )\n}\n\nexport default NavBar\n"]},"metadata":{},"sourceType":"module"}