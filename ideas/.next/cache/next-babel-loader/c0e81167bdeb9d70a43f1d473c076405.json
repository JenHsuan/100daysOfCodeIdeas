{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Card } from 'react-bootstrap';\nimport ArticleModal from '../components/ArticleModal';\nimport '.././css/article.css';\nimport '.././css/card.css';\nimport { selectLoginState, selectBookmarksState } from './states/states';\nimport { addBookmark, removeBookmark } from './actions/articlesAction';\nimport Router, { useRouter } from 'next/router';\n\nconst Article = ({\n  article\n}) => {\n  const router = useRouter();\n  const disPatch = useDispatch();\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: isBookmarked,\n    1: setBookmark\n  } = useState(false);\n  const isLogin = useSelector(selectLoginState);\n  const bookmarks = useSelector(selectBookmarksState);\n  useEffect(() => {\n    if (bookmarks.find(bookmark => bookmark === article.id) !== undefined) {\n      setBookmark(true);\n    }\n  }, []);\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const handleShow = () => {\n    setShow(true);\n  };\n\n  const onBookmarkClick = () => {\n    if (isBookmarked) {\n      var bookmarksJson = localStorage.getItem(\"bookmarks\");\n\n      if (bookmarksJson !== null) {\n        var bookmarks = JSON.parse(bookmarksJson);\n        var newBookmarks = bookmarks.filter(bookmark => bookmark !== article.id);\n        localStorage.setItem(\"bookmarks\", JSON.stringify(newBookmarks));\n      }\n\n      disPatch(removeBookmark(article.id));\n    } else {\n      var bookmarksJson = localStorage.getItem(\"bookmarks\");\n      console.log(bookmarksJson);\n\n      if (bookmarksJson === null) {\n        localStorage.setItem(\"bookmarks\", `[${article.id}]`);\n      } else {\n        var bookmarks = JSON.parse(bookmarksJson);\n        bookmarks.push(article.id);\n        localStorage.setItem(\"bookmarks\", JSON.stringify(bookmarks));\n      }\n\n      disPatch(addBookmark(article.id));\n\n      if (router.pathname !== 'bookmarks') {\n        Router.push(`/bookmarks`);\n      }\n    }\n  };\n\n  useEffect(() => {}, []);\n  return __jsx(\"div\", {\n    className: \"articles-row\"\n  }, __jsx(Card, {\n    className: \"article-card\",\n    border: \"light\"\n  }, isLogin && __jsx(\"div\", {\n    className: \"article-bookmark\"\n  }, __jsx(\"span\", {\n    className: \"btn-o\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    onClick: () => {\n      onBookmarkClick();\n      return false;\n    }\n  }, isBookmarked ? __jsx(\"img\", {\n    src: \"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-yellow.png\",\n    alt: \"Add this article to the bookmark\",\n    title: \"Add this article to the bookmark\"\n  }) : __jsx(\"img\", {\n    src: \"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-white.png\",\n    alt: \"Add this article to the bookmark\",\n    title: \"Add this article to the bookmark\"\n  })))), __jsx(Card.Body, {\n    className: \"article-card-body\"\n  }, __jsx(\"img\", {\n    className: \"article-card-img\",\n    src: `${article.image}`,\n    alt: article.title,\n    title: article.title\n  }), __jsx(\"div\", {\n    className: \"title\"\n  }, article.title), __jsx(\"div\", {\n    className: \"date\"\n  }, article.name), __jsx(\"div\", {\n    className: \"date\"\n  }, __jsx(\"span\", {\n    className: \"date\"\n  }, article.time), __jsx(\"span\", null, \" . \"), __jsx(\"span\", {\n    className: \"readtime\"\n  }, article.readtime)), __jsx(\"button\", {\n    className: \"article-btn\",\n    onClick: handleShow\n  }, \"Add to plan\"))), __jsx(ArticleModal, {\n    show: show,\n    handleClose: handleClose,\n    article: article\n  }));\n};\n\nArticle.propTypes = {\n  article: PropTypes.object.isRequired\n};\nexport default Article;","map":{"version":3,"sources":["/Users/seanhsieh/github/100daysOfCodeIdeas/ideas/src/components/Article.tsx"],"names":["React","useEffect","useState","useSelector","PropTypes","Card","ArticleModal","selectLoginState","selectBookmarksState","addBookmark","removeBookmark","Router","useRouter","Article","article","router","disPatch","useDispatch","show","setShow","isBookmarked","setBookmark","isLogin","bookmarks","find","bookmark","id","undefined","handleClose","handleShow","onBookmarkClick","bookmarksJson","localStorage","getItem","JSON","parse","newBookmarks","filter","setItem","stringify","console","log","push","pathname","image","title","name","time","readtime","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'\nimport { useSelector } from 'react-redux';\nimport PropTypes from 'prop-types'\nimport { Card} from 'react-bootstrap';\nimport ArticleModal from '../components/ArticleModal';\nimport '.././css/article.css'\nimport '.././css/card.css'\nimport {\n    selectLoginState,\n    selectBookmarksState\n} from './states/states';\n\nimport { \n    addBookmark,\n    removeBookmark\n} from './actions/articlesAction';\nimport Router, { useRouter } from 'next/router'\n\nconst Article = ({article}) => {\n    const router = useRouter();\n    const disPatch = useDispatch();\n    const [show, setShow] = useState(false);\n    const [isBookmarked, setBookmark] = useState(false);\n    const isLogin = useSelector(selectLoginState);\n    const bookmarks = useSelector(selectBookmarksState)\n\n    useEffect(()=> {\n        if (bookmarks.find(bookmark => bookmark === article.id) !== undefined ) {\n            setBookmark(true);\n        }\n    }, [])\n\n    const handleClose = () => {\n        setShow(false);\n    }\n\n    const handleShow = () => {\n        setShow(true);\n    }\n\n    const onBookmarkClick = () => {\n        if (isBookmarked) {\n            var bookmarksJson = localStorage.getItem(\"bookmarks\");\n            if (bookmarksJson !== null) {\n                var bookmarks = JSON.parse(bookmarksJson);\n                var newBookmarks = bookmarks.filter(bookmark => bookmark !== article.id);\n                localStorage.setItem(\"bookmarks\", JSON.stringify(newBookmarks));\n            }\n            disPatch(removeBookmark(article.id));\n        } else {\n            var bookmarksJson = localStorage.getItem(\"bookmarks\");\n            console.log(bookmarksJson)\n            if (bookmarksJson === null) {\n                localStorage.setItem(\"bookmarks\", `[${article.id}]`);\n            } else {\n                var bookmarks = JSON.parse(bookmarksJson);\n                bookmarks.push(article.id);\n                localStorage.setItem(\"bookmarks\", JSON.stringify(bookmarks));\n            }\n            disPatch(addBookmark(article.id));\n            if (router.pathname !== 'bookmarks') {\n                Router.push(`/bookmarks`)\n            }\n        }\n    }\n\n    useEffect(()=> {\n    }, [])\n\n    return (\n        <div className=\"articles-row\">\n            <Card className=\"article-card\" border=\"light\">\n                {isLogin && (\n                <div className=\"article-bookmark\">\n                    <span className=\"btn-o\">\n                        <a href='#' onClick={()=>{onBookmarkClick(); return false;}}>\n                            {isBookmarked \n                            ? <img src=\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-yellow.png\" alt=\"Add this article to the bookmark\" title=\"Add this article to the bookmark\"/>\n                            : <img src=\"https://raw.githubusercontent.com/JenHsuan/ALayman/master/views/images/bookmark-white.png\" alt=\"Add this article to the bookmark\" title=\"Add this article to the bookmark\"/>\n                            }\n                        </a>\n                    </span>\n                </div>\n                )}\n                <Card.Body className=\"article-card-body\">\n                    <img className=\"article-card-img\" src={`${article.image}`} alt={article.title} title={article.title}/>\n                    <div className=\"title\">{article.title}</div>\n                    <div className=\"date\">{article.name}</div>\n                    <div className=\"date\">\n                        <span className=\"date\">{article.time}</span>\n                        <span> . </span>\n                        <span className=\"readtime\">{article.readtime}</span>\n                    </div>\n                    <button className=\"article-btn\" onClick = {handleShow}>Add to plan</button>\n                </Card.Body>\n            </Card>\n            <ArticleModal show = {show} handleClose = {handleClose} article = {article} />\n        </div>\n    \n    )\n}\n\nArticle.propTypes = {\n    article: PropTypes.object.isRequired\n}\n\nexport default Article\n"]},"metadata":{},"sourceType":"module"}