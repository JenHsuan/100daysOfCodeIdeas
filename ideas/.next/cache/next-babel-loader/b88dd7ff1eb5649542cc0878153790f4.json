{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'; //import { GoogleLogin } from 'react-google-login';\n\nimport GitHubLogin from 'react-github-login';\nimport '.././css/signinform.css';\nimport axios from 'axios';\nimport { Form } from 'react-bootstrap';\nimport { useDispatch } from 'react-redux';\nimport { setLogin, setLogout, setAccessToken, setEmail } from './actions/articlesAction';\n\nvar SignInForm = function SignInForm() {\n  var disPatch = useDispatch();\n\n  var passAccessToken = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(provider, access_token) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.post('/api/social-auth/', {\n                provider: provider,\n                access_token: access_token\n              });\n\n            case 2:\n              res = _context.sent;\n              return _context.abrupt(\"return\", res);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function passAccessToken(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var responseFacebook = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(response) {\n      var responseFromDjango;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              console.log(response[\"accessToken\"]);\n              console.log(response);\n              disPatch(setEmail(response[\"email\"]));\n              _context2.next = 6;\n              return passAccessToken('facebook', response[\"accessToken\"]);\n\n            case 6:\n              responseFromDjango = _context2.sent;\n              console.log(responseFromDjango);\n              disPatch(setLogin());\n              disPatch(setAccessToken(responseFromDjango[\"data\"][\"token\"]));\n              _context2.next = 16;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](0);\n              //res.data = error;\n              console.log(_context2.t0);\n              disPatch(setLogout());\n\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 12]]);\n    }));\n\n    return function responseFacebook(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var responseGoogle = function responseGoogle(response) {\n    console.log(response);\n  };\n\n  var ResponseGithubOnSuccess = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(response) {\n      var responseFromGithub, responseFromDjango;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.post('api/get-github-access-token/', {\n                code: response['code']\n              });\n\n            case 3:\n              responseFromGithub = _context3.sent;\n              console.log(responseFromGithub['data']);\n              _context3.next = 7;\n              return passAccessToken('github', responseFromGithub['data']);\n\n            case 7:\n              responseFromDjango = _context3.sent;\n              console.log(responseFromDjango);\n              disPatch(setLogin());\n              disPatch(setAccessToken(responseFromDjango[\"data\"][\"token\"]));\n              disPatch(setEmail(responseFromDjango[\"data\"][\"email\"]));\n              _context3.next = 18;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](0);\n              //res.data = error;\n              console.log(_context3.t0);\n              disPatch(setLogout());\n\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 14]]);\n    }));\n\n    return function ResponseGithubOnSuccess(_x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var ResponseGithubOnFailure = function ResponseGithubOnFailure(response) {\n    return console.error(response);\n  };\n\n  return __jsx(\"div\", {\n    className: \"signinform\"\n  }, __jsx(\"div\", {\n    className: \"grid-box\"\n  }, __jsx(\"div\", {\n    className: \"title\"\n  }, \"Welcome back!\"), __jsx(FacebookLogin, {\n    cssClass: \"fb-btn\",\n    appId: \"240314257268798\",\n    autoLoad: false,\n    fields: \"name,email,picture\",\n    callback: responseFacebook,\n    render: function render(renderProps) {\n      return __jsx(\"button\", {\n        onClick: renderProps.onClick,\n        className: \"fb-btn\"\n      }, \"Facebook\");\n    }\n  }), __jsx(GitHubLogin, {\n    className: \"github-btn\",\n    clientId: \"51b1a8ee5b7cad1e6a85\",\n    redirectUri: \"http://localhost:3000/signin\",\n    onSuccess: ResponseGithubOnSuccess,\n    onFailure: ResponseGithubOnFailure,\n    buttonText: \"Github\"\n  }), __jsx(\"div\", {\n    className: \"split-line\"\n  }, \"or signin by email\"), __jsx(\"div\", {\n    className: \"signin-form\"\n  }, __jsx(Form, null, __jsx(Form.Group, {\n    controlId: \"formBasicEmail\"\n  }, __jsx(Form.Control, {\n    type: \"email\",\n    placeholder: \"Enter email\",\n    className: \"email\"\n  })), __jsx(Form.Group, {\n    controlId: \"formBasicPassword\"\n  }, __jsx(Form.Control, {\n    type: \"password\",\n    placeholder: \"Password\",\n    className: \"password\"\n  }))))));\n};\n\nexport default SignInForm;","map":null,"metadata":{},"sourceType":"module"}